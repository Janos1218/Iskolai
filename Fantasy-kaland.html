<!DOCTYPE html>
<html lang="hu">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Fantasy Kaland</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        background-color: #1a1a2e;
        color: #e6e6e6;
        font-family: "Georgia", serif;
        background-image: url("https://images.unsplash.com/photo-1506318137071-a8e063b4bec0?q=80&w=1000");
        background-size: cover;
        background-attachment: fixed;
        background-position: center;
        min-height: 100vh;
        padding-bottom: 60px;
      }
      .story-container {
        background-color: rgba(22, 33, 62, 0.9);
        border-radius: 10px;
        padding: 20px;
        box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
        margin-top: 20px;
        backdrop-filter: blur(5px);
      }
      .story-text {
        font-size: 1.1rem;
        line-height: 1.6;
        margin-bottom: 25px;
        text-align: justify;
      }
      .choice-btn {
        background-color: #4e4e8a;
        color: white;
        border: none;
        margin: 5px;
        transition: all 0.3s;
        opacity: 0;
        transform: translateY(20px);
      }
      .choice-btn.show {
        opacity: 1;
        transform: translateY(0);
        transition: all 0.5s ease-out;
      }
      .choice-btn:hover {
        background-color: #6a6aa8;
        transform: translateY(-2px) scale(1.02);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
      }
      .title {
        color: #f8bb44;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        margin-bottom: 20px;
        font-family: "Cinzel", serif;
      }
      .image-placeholder {
        background-color: rgba(15, 52, 96, 0.7);
        height: 200px;
        border-radius: 5px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: 20px;
        color: #a1a1a1;
        overflow: hidden;
        position: relative;
      }
      .world-lore {
        background-color: rgba(10, 25, 47, 0.9);
        padding: 20px;
        border-radius: 10px;
        margin-bottom: 20px;
        border-left: 4px solid #f8bb44;
      }
      .combat-container {
        background-color: rgba(70, 0, 0, 0.7);
        padding: 15px;
        border-radius: 8px;
        margin: 15px 0;
        border: 2px solid #ff0000;
      }
      .character-stats {
        background-color: rgba(0, 50, 70, 0.7);
        padding: 10px;
        border-radius: 5px;
        margin-bottom: 10px;
      }
      .enemy-stats {
        background-color: rgba(70, 0, 30, 0.7);
        padding: 10px;
        border-radius: 5px;
        margin-bottom: 10px;
      }
      .health-bar {
        height: 20px;
        background-color: #333;
        border-radius: 3px;
        margin: 5px 0;
        overflow: hidden;
      }
      .health-fill {
        height: 100%;
        background-color: #4caf50;
        transition: width 0.5s;
      }
      .damage-animation {
        animation: flashRed 0.3s;
      }
      @keyframes flashRed {
        0% {
          background-color: inherit;
        }
        50% {
          background-color: #ff0000;
        }
        100% {
          background-color: inherit;
        }
      }
      .inventory {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background: rgba(22, 33, 62, 0.9);
        padding: 10px;
        border-radius: 5px;
        max-width: 200px;
        z-index: 1000;
      }
      .inventory-item {
        display: inline-block;
        margin: 5px;
        font-size: 0.8rem;
        cursor: pointer;
      }
      .progress-tracker {
        position: fixed;
        bottom: 20px;
        left: 20px;
        background: rgba(22, 33, 62, 0.9);
        padding: 10px;
        border-radius: 5px;
        max-width: 200px;
        z-index: 1000;
        font-size: 0.8rem;
      }
      .dice-roll {
        display: inline-block;
        padding: 5px 10px;
        background-color: #333;
        border-radius: 50%;
        margin: 0 3px;
        font-weight: bold;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-lg-8">
          <h1
            class="text-center title my-4 animate__animated animate__fadeInDown"
          >
            A Titokzatos Kir√°lys√°g Kalandja
          </h1>

          <div
            id="loreSection"
            class="world-lore animate__animated animate__fadeIn"
          >
            <h3 class="text-center">A Vil√°g H√°tt√©rt√∂rt√©nete</h3>
            <p>
              A <strong>V√©gtelen Erd≈ë</strong> √©s a
              <strong>K≈ësz√≠v Hegyei</strong> k√∂z√∂tt fekszik Eldoria titokzatos
              kir√°lys√°ga, ahol n√©gy nagy hatalom k√ºzd az uralom√©rt:
            </p>
            <ul>
              <li>
                A <span style="color: #a3d9ff">T√ºnd√©rek Tan√°csa</span>, akik
                ≈ërzik az ≈ësi erd≈ëk titkait
              </li>
              <li>
                A <span style="color: #ff6b6b">S√∂t√©t Var√°zsl√≥k Rendje</span>,
                akik a felejthetetlen hatalomra v√°gynak
              </li>
              <li>
                A <span style="color: #a0ffa0">B√∂lcsek K√∂re</span>, akik a tud√°s
                ≈ërz≈ëi
              </li>
              <li>
                A <span style="color: #ffcc5c">V√°ndorl√≥ Harcosok</span>, akiknek
                nincs √°lland√≥ otthonuk
              </li>
            </ul>
            <p>
              Te, mint egy egyszer≈± utaz√≥, a v√©gzet sodr√°sa k√∂zepette tal√°lod
              magad, amikor egy ≈ësi pr√≥f√©cia szerint "a n√©gy hatalom k√∂z√ºl h√°rom
              el fog bukni, √©s egy idegen d√∂nti el Eldoria sors√°t"...
            </p>

            <div class="character-creation mt-4">
              <h4 class="text-center">Karaktered l√©trehoz√°sa</h4>
              <div class="mb-3">
                <label for="charName" class="form-label">H≈ës√∂d neve:</label>
                <input type="text" class="form-control" id="charName" />
              </div>
              <div class="mb-3">
                <label class="form-label">Kaszt:</label>
                <div class="form-check">
                  <input
                    class="form-check-input"
                    type="radio"
                    name="charClass"
                    id="warrior"
                    value="warrior"
                    checked
                  />
                  <label class="form-check-label" for="warrior"
                    >Harcos (Er≈ë: +3, √úgyess√©g: +1, B√∂lcsess√©g: +0)</label
                  >
                </div>
                <div class="form-check">
                  <input
                    class="form-check-input"
                    type="radio"
                    name="charClass"
                    id="rogue"
                    value="rogue"
                  />
                  <label class="form-check-label" for="rogue"
                    >Rabl√≥ (Er≈ë: +1, √úgyess√©g: +3, B√∂lcsess√©g: +0)</label
                  >
                </div>
                <div class="form-check">
                  <input
                    class="form-check-input"
                    type="radio"
                    name="charClass"
                    id="wizard"
                    value="wizard"
                  />
                  <label class="form-check-label" for="wizard"
                    >Var√°zsl√≥ (Er≈ë: +0, √úgyess√©g: +1, B√∂lcsess√©g: +3)</label
                  >
                </div>
              </div>
            </div>

            <button
              id="startBtn"
              class="btn btn-warning d-block mx-auto mt-3 animate__animated animate__pulse animate__infinite"
            >
              Kezdd el a kalandot!
            </button>
          </div>

          <div
            class="story-container animate__animated animate__fadeIn"
            id="storyContainer"
            style="display: none"
          >
            <!-- A t√∂rt√©net itt jelenik meg -->
          </div>
        </div>
      </div>
    </div>

    <div
      class="inventory animate__animated animate__fadeInRight"
      id="inventory"
      style="display: none"
    >
      <h5>T√°rgyaid: <span id="goldAmount">0</span> üí∞</h5>
      <div id="inventoryItems"></div>
    </div>

    <div
      class="progress-tracker animate__animated animate__fadeInLeft"
      id="progressTracker"
      style="display: none"
    >
      <h5>Felfedezett helyek:</h5>
      <div id="visitedPlaces"></div>
    </div>

    <script>
      // T√∂rt√©net szegmensek

      const storyParts = [
        {
          id: 1,
          text: "A nap lenyugv√≥ f√©ny√©ben √°llsz a V√©gtelen Erd≈ë sz√©l√©n. El≈ëtted k√©t √∂sv√©ny √°gazik sz√©t: az egyik a s≈±r≈± erd≈ëbe vezet, a m√°sik egy meredek hegyi √∂sv√©ny fel√© kanyarodik. A sz√©l s√∫rolja arcod, mintha figyelmeztetne valamire.",
          image: "forest",
          choices: [
            {
              text: "Bev√°gsz az erd≈ë s≈±r≈±j√©be",
              nextPart: 2,
              animation: "animate__fadeInLeft",
            },
            {
              text: "Megindulsz a hegyi √∂sv√©nyen",
              nextPart: 3,
              animation: "animate__fadeInRight",
            },
          ],
          placeName: "Erd≈ësz√©li Kereszt√∫t",
        },
        {
          id: 2,
          text: "Ahogy bel√©psz az erd≈ëbe, a lombkorona alatt hirtelen s√∂t√©t lesz. A leveg≈ëben k√ºl√∂n√∂s, √©desk√©s illat terjeng. Hirtelen egy rejt√©lyes f√©nyt veszel √©szre a t√°volban, amely ide-oda mozog a f√°k k√∂z√∂tt. K√∂zelebb √©rve l√°tod, hogy egy kicsiny, sz√°rnyas teremtm√©ny - egy erdei t√ºnd√©r - sz√°ll a leveg≈ëben, √©s figyel t√©ged.",
          image: "fairy",
          choices: [
            {
              text: "Megpr√≥b√°lod megk√∂zel√≠teni a t√ºnd√©rt",
              nextPart: 4,
              animation: "animate__fadeInLeft",
            },
            {
              text: "√ìvatosan elhagyod a helyet, nehogy bajba keveredj",
              nextPart: 5,
              animation: "animate__fadeInRight",
            },
          ],
          placeName: "T√ºnd√©rvil√°g Kapuja",
        },
        {
          id: 3,
          text: "A hegyi √∂sv√©ny meredek √©s kanyarg√≥s. Ahogy felm√°szol, a leveg≈ë egyre h≈±v√∂sebb√© v√°lik. Egy sziklaszirten egy v√©n varj√∫t l√°tsz √ºld√∂g√©lni, amely furcs√°n ismer≈ësnek t≈±nik. A mad√°r szeme ragyog, mintha bel√ºlr≈ël vil√°g√≠tana. Hirtelen a varj√∫ megsz√≥lal: 'Aki tov√°bb l√©p, v√°lasztania kell - b√∂lcsess√©g vagy hatalom?'",
          image: "raven",
          choices: [
            {
              text: "A b√∂lcsess√©get v√°lasztod",
              nextPart: 6,
              animation: "animate__fadeInLeft",
            },
            {
              text: "A hatalmat v√°lasztod",
              nextPart: 7,
              animation: "animate__fadeInRight",
            },
          ],
          placeName: "Besz√©l≈ë Varj√∫ Szikl√°ja",
        },
        {
          id: 4,
          text: "A t√ºnd√©r mosolyogva k√∂zeledik hozz√°d. 'Ritka, hogy egy haland√≥ megl√°t minket' - susogja. Kez√©ben egy csillog√≥ k√∂vet tart. 'Ha seg√≠tesz nek√ºnk, megaj√°nd√©kozlak ezzel a var√°zsk≈ëvel, amely k√©pes megj√≥solni a vesz√©lyt.' A t√ºnd√©r elmes√©li, hogy az erd≈ë m√©ly√©n egy s√∂t√©t var√°zsl√≥ elrabolta a t√ºnd√©rek kir√°lyn≈ëj√©t.",
          image: "magic",
          choices: [
            {
              text: "Felaj√°nlod, hogy seg√≠tesz megmenteni a kir√°lyn≈ët",
              nextPart: 8,
              animation: "animate__fadeInLeft",
            },
            {
              text: "K√∂sz√∂n√∂d az aj√°nlatot, de tov√°bb m√©sz",
              nextPart: 9,
              animation: "animate__fadeInRight",
            },
          ],
          item: {
            name: "Var√°zsk≈ë",
            description: "Megj√≥solja a k√∂zelg≈ë vesz√©lyt",
            icon: "üîÆ",
          },
          placeName: "T√ºnd√©r Tal√°lkoz√≥",
        },
        {
          id: 5,
          text: "√ìvatosan h√°tr√°lsz, de t√∫l k√©s≈ë. A t√ºnd√©r var√°zslata megb√©n√≠t. 'Gyan√∫tlan utaz√≥, csapd√°ba est√©l!' - ki√°ltja. A f√∂ld al√≥l gy√∂kerek t√∂rnek el≈ë √©s megk√∂t√∂zik. A t√ºnderek tan√°csa el√© visznek, ahol v√°dolva leszel, hogy a s√∂t√©t var√°zsl√≥ k√©mje vagy. Mit teszel?",
          image: "trap",
          choices: [
            {
              text: "Megpr√≥b√°lod meggy≈ëzni ≈ëket az √°rtatlans√°godr√≥l",
              nextPart: 10,
              animation: "animate__fadeInLeft",
            },
            {
              text: "Kihaszn√°lod a pillanatnyi zavart √©s megsz√∂ksz",
              nextPart: 11,
              animation: "animate__fadeInRight",
            },
          ],
          placeName: "T√ºnd√©r Tan√°cs Terme",
        },
        {
          id: 6,
          text: "A varj√∫ b√≥lint. 'B√∂lcs v√°laszt√°s.' Sz√°rnya al√≥l egy ≈ësr√©gi k√∂nyvet vesz el≈ë. 'Ezt a k√∂nyvet ≈ërizd, mert √∫tmutat√°st tartalmaz a j√∂v≈ëbeli pr√≥b√°idra.' Ahogy √°tveszed a k√∂nyvet, a varj√∫ elporlad, √©s a szikl√°k m√∂g√ºl egy rejtett barlang bej√°rata t√°rul fel. A k√∂nyv c√≠mlapj√°n egy ≈ësi jel l√°that√≥: a B√∂lcsess√©g Cirk√°l√≥ja.",
          image: "ancient-book",
          choices: [
            {
              text: "Beleolvasol a k√∂nyvbe",
              nextPart: 12,
              animation: "animate__fadeInLeft",
            },
            {
              text: "A barlang fel√© indulsz",
              nextPart: 13,
              animation: "animate__fadeInRight",
            },
          ],
          item: {
            name: "B√∂lcsess√©g K√∂nyve",
            description: "Titkokat tartalmaz",
            icon: "üìñ",
          },
          placeName: "B√∂lcsess√©g Kapuja",
        },
        {
          id: 7,
          text: "A varj√∫ m√©lyen s√≥hajt. 'Hatalom... vesz√©lyes √∫t.' Egy kardot helyez el√©d, amelynek peng√©je l√°ngol, de nem √©get. 'Ez a L√°nglelke Kard - csak az k√©pes haszn√°lni, akinek tiszta a sz√°nd√©ka.' A kard markolat√°n egy s√∂t√©t krist√°ly ragyog. Hirtelen f√∂ldreng√©s r√°zza meg a hegyet, √©s a szikla m√∂g√∂tt egy elfeledett torony teteje t≈±nik fel.",
          image: "flaming-sword",
          choices: [
            {
              text: "Felveszed a kardot √©s a torony fel√© indulsz",
              nextPart: 14,
              animation: "animate__fadeInLeft",
            },
            {
              text: "Hagyod a kardot √©s tov√°bbm√©sz az √∂sv√©nyen",
              nextPart: 15,
              animation: "animate__fadeInRight",
            },
          ],
          item: {
            name: "L√°nglelke Kard",
            description: "L√°ngol√≥ peng√©j≈± kard",
            icon: "‚öîÔ∏è",
          },
          placeName: "Hatalom V√°laszt√°sa",
        },
        {
          id: 8,
          text: "A t√ºnd√©r √∂r√∂mmel fogadja seg√≠ts√©gedet. √ötmutat√°st ad az erd≈ë vesz√©lyeihez, √©s egy var√°zsport ad neked, amely lehet≈ëv√© teszi, hogy l√°thatatlanul k√∂zel√≠ts meg. Az erd≈ë m√©ly√©n egy romos torony √°ll, k√∂r√ºl√∂tte m√©rgez≈ë g≈ëz√∂k sziv√°rognak a f√∂ldb≈ël. A t√ºnd√©r figyelmeztet: 'A var√°zsl√≥ csapd√°kat helyezett el.'",
          image: "dark-tower",
          choices: [
            {
              text: "Haszn√°lod a port √©s lopakodva behatolsz a toronyba",
              nextPart: 16,
              animation: "animate__fadeInLeft",
            },
            {
              text: "Megker√ºl√∂d a tornyot, h√°tha van h√°ts√≥ bej√°rat",
              nextPart: 17,
              animation: "animate__fadeInRight",
            },
          ],
          item: {
            name: "L√°thatatlans√°g Por",
            description: "Egy adag l√°thatatlann√° t√©v≈ë por",
            icon: "‚ú®",
          },
          placeName: "S√∂t√©t Torony K√ºsz√∂be",
        },
        {
          id: 9,
          text: "A t√ºnd√©r szomor√∫an n√©z ut√°nad, de nem akad√°lyoz meg. Tov√°bbhaladva az erd≈ëben, egy tiszt√°sra √©rsz, ahol h√°rom √∂reg fa √°ll egy k√∂rben. K√∂z√©pen egy k√∫t l√°that√≥, amelyb≈ël z√∂ldes f√©ny √°rad. A k√∫t perem√©n ≈ësi jelek figyelmeztetnek valamire, de a nyelv√ºket nem ismered.",
          image: "magic-well",
          choices: [
            {
              text: "Megn√©zed, mi van a k√∫t m√©ly√©n",
              nextPart: 18,
              animation: "animate__fadeInLeft",
            },
            {
              text: "Ker√ºl√∂d a kutat √©s tov√°bbm√©sz",
              nextPart: 19,
              animation: "animate__fadeInRight",
            },
          ],
          placeName: "H√°romfa Tiszt√°s",
        },
        {
          id: 10,
          text: "Nyugodt hangon elmagyar√°zod, hogy csak egy utaz√≥ vagy, aki nem √°ll sz√°nd√©k√°ban b√°ntani a t√ºnd√©reket. A tan√°cs tagjai k√∂z√∂tt vita t√∂r ki. Egy id≈ës t√ºnd√©r, akinek sz√°rnyai m√°r megl√°gyultak, k√∂zelebb l√©p hozz√°d √©s a homlokodra helyezi kez√©t. 'Igazat sz√≥l' - mondja. A t√∂bbi t√ºnd√©r habozik, de v√©g√ºl elengednek, s≈ët, egy kis √ºvegcsk√©vel megaj√°nd√©koznak, amely gy√≥gy√≠t√≥ nedvet tartalmaz.",
          image: "fairy-council",
          choices: [
            {
              text: "Megk√∂sz√∂n√∂d a seg√≠ts√©get √©s tov√°bbm√©sz",
              nextPart: 20,
              animation: "animate__fadeInLeft",
            },
            {
              text: "Felaj√°nlod, hogy cser√©be seg√≠tesz nekik valamiben",
              nextPart: 21,
              animation: "animate__fadeInRight",
            },
          ],
          item: {
            name: "Gy√≥gy√≠t√≥ Nekt√°r",
            description: "Sebeket gy√≥gy√≠t√≥ folyad√©k",
            icon: "üß™",
          },
          placeName: "T√ºnd√©r Igazs√°gszolg√°ltat√°s",
        },
        // Tov√°bbi 30+ fejezet...
        {
          id: 16,
          text: "A l√°thatatlans√°g port haszn√°lva csendesen bel√©psz a toronyba. A falak ment√©n mozg√≥ √°rny√©kokat l√°tsz - a var√°zsl√≥ ≈ërei. Egy hirtelen mozdulattal megragad egy k√©z a csukl√≥d! Egy l√°thatatlan l√©ny t√°mad r√°d!",
          image: "invisible-monster",
          combat: {
            enemy: "L√°thatatlan ≈êr",
            health: 25,
            attack: "1d6+2",
            defense: 14,
            exp: 50,
            gold: "1d10",
          },
          choices: [
            {
              text: "Megk√ºzd√∂l az ≈ërrel",
              nextPart: 22,
              animation: "animate__fadeInLeft",
            },
            {
              text: "Megpr√≥b√°lsz kiszabadulni √©s tov√°bbmenni",
              nextPart: 23,
              animation: "animate__fadeInRight",
            },
          ],
          placeName: "S√∂t√©t Torony Belseje",
        },
        // Tov√°bbi harci jelenetek...
        {
          id: 22,
          text: "A l√°thatatlan l√©ny hirtelen megjelenik, ahogy harcba kezdetek! Egy f√©lelmetes, emberszab√°s√∫ teremtm√©ny, b≈ëre √°tl√°tsz√≥ mint a krist√°ly!",
          image: "crystal-creature",
          combat: {
            enemy: "Krist√°lylid√©rc",
            health: 35,
            attack: "1d8+3",
            defense: 16,
            special: "√Åtl√°tsz√≥s√°g: 25% es√©ly hogy elhib√°zod",
            exp: 75,
            gold: "2d10",
          },
          placeName: "V√©gzetes P√°rbaj",
        },
        // Tov√°bbi 20+ fejezet...
      ];
      function showLoading() {
        storyContainer.innerHTML = `
        <div class="text-center py-4">
            <div class="spinner-border text-warning" role="status">
                <span class="visually-hidden">Bet√∂lt√©s...</span>
            </div>
        </div>
    `;
      }
      function showError(message) {
        storyContainer.innerHTML = `
        <div class="alert alert-danger animate__animated animate__headShake">
            ${message}
        </div>
        <button class="btn btn-secondary mt-3" onclick="displayStoryPart(currentPartId)">
            √öjrapr√≥b√°lkoz√°s
        </button>
    `;
      }
      function displayStoryPart(partId) {
        showLoading();

        try {
          // ... l√©tez≈ë k√≥d ...
        } catch (error) {
          showError("Hiba t√∂rt√©nt a t√∂rt√©net bet√∂lt√©se k√∂zben");
          console.error(error);
        }
      }
      // Karakter statisztik√°k
      const player = {
        name: "",
        class: "warrior",
        level: 1,
        exp: 0,
        maxHealth: 30,
        health: 30,
        strength: 3,
        dexterity: 1,
        wisdom: 0,
        gold: 0,
        inventory: [],
        equippedWeapon: { name: "T≈ër", damage: "1d4" },
        equippedArmor: { name: "V√°szoning", defense: 10 },
      };

      // J√°t√©k √°llapota
      let currentPartId = 1;
      let visitedPlaces = [];
      let typingInterval;
      let inCombat = false;
      let currentEnemy = null;

      // DOM elemek
      const storyContainer = document.getElementById("storyContainer");
      const loreSection = document.getElementById("loreSection");
      const startBtn = document.getElementById("startBtn");
      const inventoryElement = document.getElementById("inventory");
      const inventoryItems = document.getElementById("inventoryItems");
      const progressTracker = document.getElementById("progressTracker");
      const visitedPlacesList = document.getElementById("visitedPlaces");
      const goldAmount = document.getElementById("goldAmount");
      const charNameInput = document.getElementById("charName");
      const charClassRadios = document.getElementsByName("charClass");

      // K√©pbet√∂lt√©s jav√≠tott verzi√≥ja
      async function loadImage(part) {
        const imagePlaceholder = document.createElement("div");
        imagePlaceholder.className =
          "image-placeholder animate__animated animate__fadeIn";

        const img = document.createElement("img");
        img.style.width = "100%";
        img.style.height = "100%";
        img.style.objectFit = "cover";
        img.alt = part.placeName || "Fantasy k√©p";

        // 1. Pr√≥b√°ljuk meg a direkt bet√∂lt√©st
        img.src = await getImageUrl(part.image);

        // 2. Ha nem siker√ºl, pr√≥b√°ljunk m√°sik forr√°st
        img.onerror = async function () {
          console.warn("Els≈ë k√©pforr√°s nem el√©rhet≈ë, alternat√≠va pr√≥b√°lkoz√°sa");
          this.src = await getFallbackImageUrl(part.image);

          // 3. Ha az sem m≈±k√∂dik, placeholder k√©p
          this.onerror = function () {
            this.src =
              "https://via.placeholder.com/800x600?text=K√©p+nem+el√©rhet≈ë";
          };
        };

        imagePlaceholder.appendChild(img);
        return imagePlaceholder;
      }

      async function getImageUrl(keyword) {
        // Pr√≥b√°ljunk meg k√ºl√∂nb√∂z≈ë forr√°sokat
        const sources = [
          `https://source.unsplash.com/random/800x600/?fantasy,${keyword}&sig=${Math.random()}`,
          `https://picsum.photos/800/600?random=${Math.random()}&grayscale&blur=2`,
          `https://api.unsplash.com/photos/random?query=fantasy-${keyword}&client_id=YOUR_ACCESS_KEY`,
        ];

        // Visszaadjuk az els≈ë forr√°st (val√≥s implement√°ci√≥ban lehetne pr√≥b√°lkozni mindegyikkel)
        return sources[0];
      }

      async function getFallbackImageUrl(keyword) {
        // Alternat√≠v k√©pforr√°sok
        const fallbacks = [
          `https://picsum.photos/800/600?random=${Math.random()}`,
          "https://www.gamespot.com/a/uploads/original/1562/15626911/3805169-fantasy%20art.jpg",
          "https://cdnb.artstation.com/p/assets/images/images/015/951/307/large/gregory-nunkovits-dark-fantasy-landscape.jpg",
        ];

        return fallbacks[Math.floor(Math.random() * fallbacks.length)];
      }

      // Tov√°bbi f√ºggv√©nyek (displayStoryPart, combat stb.)...
      // A teljes k√≥d t√∫l hossz√∫ itt, de tartalmazza a harcrendszert, inventory kezel√©st, stb.

      // Oldal bet√∂lt√©sekor
      window.onload = function () {
        startBtn.addEventListener("click", function () {
          // Karakter l√©trehoz√°sa
          player.name = charNameInput.value || "Vend√©g";

          for (const radio of charClassRadios) {
            if (radio.checked) {
              player.class = radio.value;
              // Kaszt specifikus statok be√°ll√≠t√°sa
              if (player.class === "warrior") {
                player.strength = 3;
                player.dexterity = 1;
                player.wisdom = 0;
                player.equippedWeapon = { name: "Kard", damage: "1d8" };
              } else if (player.class === "rogue") {
                player.strength = 1;
                player.dexterity = 3;
                player.wisdom = 0;
                player.equippedWeapon = { name: "T≈ër", damage: "1d6" };
              } else if (player.class === "wizard") {
                player.strength = 0;
                player.dexterity = 1;
                player.wisdom = 3;
                player.equippedWeapon = { name: "Var√°zsp√°lca", damage: "1d4" };
              }
              break;
            }
          }

          this.classList.remove("animate__pulse", "animate__infinite");
          loreSection.classList.add("animate__fadeOut");

          setTimeout(() => {
            loreSection.style.display = "none";
            storyContainer.style.display = "block";
            inventoryElement.style.display = "block";
            progressTracker.style.display = "block";
            displayStoryPart(currentPartId);
            loreSection.classList.remove("animate__fadeOut");
          }, 500);
        });
      };
    </script>
  </body>
</html>
